{"ast":null,"code":"import * as CONSTANTS from './constants';\nimport produce from 'immer';\nexport const initialState = {\n  loading: {\n    cartItems: false,\n    address: false\n  },\n  data: {\n    cartItems: localStorage.getItem('cartItems') ? JSON.parse(localStorage.getItem('cartItems')) : [],\n    address: localStorage.getItem('shippingAddress') ? JSON.parse(localStorage.getItem('shippingAddress')) : {}\n  },\n  error: {\n    cartItems: '',\n    address: ''\n  }\n};\n\nconst reducer = (state = initialState, {\n  type,\n  payload\n}) => produce(state, draft => {\n  switch (type) {\n    case CONSTANTS.CART_ADD_ITEM_REQUEST:\n    case CONSTANTS.CART_REMOVE_ITEM_REQUEST:\n      draft.loading.cartItems = true;\n      break;\n\n    case CONSTANTS.CART_ADD_ITEM_SUCCESS:\n      draft.loading.cartItems = false; // draft.data.cartItems = payload;\n\n      const existItem = draft.data.cartItems.find(x => x.product === payload.product);\n      existItem ? draft.data.cartItems = draft.data.cartItems.map(x => x.product === existItem.product ? payload : x) : draft.data.cartItems = [...draft.data.cartItems, payload];\n      break;\n\n    case CONSTANTS.CART_REMOVE_ITEM_SUCCESS:\n      draft.loading.cartItems = false;\n      draft.data.cartItems = draft.data.cartItems.filter(x => x.product !== payload);\n      break;\n\n    case CONSTANTS.CART_ADD_ITEM_FAIL:\n    case CONSTANTS.CART_REMOVE_ITEM_FAIL:\n      draft.loading.cartItems = false;\n      break;\n\n    case CONSTANTS.CART_SAVE_ADDRESS_REQUEST:\n      draft.loading.address = true;\n      break;\n\n    case CONSTANTS.CART_SAVE_ADDRESS_SUCCESS:\n      draft.loading.address = false;\n      draft.data.break;\n\n    case CONSTANTS.CART_SAVE_ADDRESS_FAIL:\n      draft.loading.address = false;\n      break;\n\n    default:\n      return draft;\n  }\n});\n\nexport default reducer;","map":{"version":3,"sources":["C:/Users/uzuma/Desktop/hamdiRH/proshop mern/frontend/src/redux/cart/reducers.js"],"names":["CONSTANTS","produce","initialState","loading","cartItems","address","data","localStorage","getItem","JSON","parse","error","reducer","state","type","payload","draft","CART_ADD_ITEM_REQUEST","CART_REMOVE_ITEM_REQUEST","CART_ADD_ITEM_SUCCESS","existItem","find","x","product","map","CART_REMOVE_ITEM_SUCCESS","filter","CART_ADD_ITEM_FAIL","CART_REMOVE_ITEM_FAIL","CART_SAVE_ADDRESS_REQUEST","CART_SAVE_ADDRESS_SUCCESS","break","CART_SAVE_ADDRESS_FAIL"],"mappings":"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","sourcesContent":["import * as CONSTANTS from './constants';\r\nimport produce from 'immer';\r\nexport const initialState = {\r\n  loading: { cartItems: false,address:false },\r\n  data: {\r\n    cartItems: localStorage.getItem('cartItems')\r\n      ? JSON.parse(localStorage.getItem('cartItems'))\r\n      : [],\r\n      address:localStorage.getItem('shippingAddress')\r\n      ? JSON.parse(localStorage.getItem('shippingAddress'))\r\n      : {},\r\n  },\r\n  error: { cartItems: '',address:'' },\r\n};\r\n\r\nconst reducer = (state = initialState, { type, payload }) =>\r\n  produce(state, (draft) => {\r\n    switch (type) {\r\n      case CONSTANTS.CART_ADD_ITEM_REQUEST:\r\n      case CONSTANTS.CART_REMOVE_ITEM_REQUEST:\r\n        draft.loading.cartItems = true;\r\n        break;\r\n      case CONSTANTS.CART_ADD_ITEM_SUCCESS:\r\n        draft.loading.cartItems = false;\r\n        // draft.data.cartItems = payload;\r\n        const existItem = draft.data.cartItems.find(\r\n          (x) => x.product === payload.product,\r\n        );\r\n        existItem\r\n          ? (draft.data.cartItems = draft.data.cartItems.map((x) =>\r\n              x.product === existItem.product ? payload : x,\r\n            ))\r\n          : (draft.data.cartItems = [...draft.data.cartItems, payload]);\r\n        break;\r\n      case CONSTANTS.CART_REMOVE_ITEM_SUCCESS:\r\n        draft.loading.cartItems = false;\r\n        draft.data.cartItems = draft.data.cartItems.filter(\r\n          (x) => x.product !== payload,\r\n        );\r\n        break;\r\n\r\n      case CONSTANTS.CART_ADD_ITEM_FAIL:\r\n      case CONSTANTS.CART_REMOVE_ITEM_FAIL:\r\n        draft.loading.cartItems = false;\r\n        break;\r\ncase CONSTANTS.CART_SAVE_ADDRESS_REQUEST:\r\n  draft.loading.address = true;\r\n  break;\r\ncase CONSTANTS.CART_SAVE_ADDRESS_SUCCESS:\r\n  draft.loading.address = false;\r\n  draft.data.\r\n  break;\r\ncase CONSTANTS.CART_SAVE_ADDRESS_FAIL:\r\n  draft.loading.address = false;\r\n  break;\r\n      default:\r\n        return draft;\r\n    }\r\n  });\r\n\r\nexport default reducer;\r\n"]},"metadata":{},"sourceType":"module"}