{"ast":null,"code":"import { takeEvery, put, all, call } from 'redux-saga/effects';\nimport * as api from './services';\nimport * as CONSTANTS from './constants';\nexport function* addToCart({\n  id,\n  qty\n}) {\n  try {\n    const data = yield call(api.addToCartService, id);\n    yield put({\n      type: CONSTANTS.CART_ADD_ITEM_SUCCESS,\n      payload: {\n        product: data._id,\n        name: data.name,\n        image: data.image,\n        price: data.price,\n        countInStock: data.countInStock,\n        qty\n      }\n    });\n    localStorage.setItem('cartItems', JSON.stringify(getState().cart.data.cartItems));\n  } catch (error) {\n    yield put({\n      type: CONSTANTS.CART_ADD_ITEM_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n}\nexport function* removeFromCart({\n  id\n}) {\n  try {\n    const data = yield call(api.fechProductDetail, id);\n    yield put({\n      type: CONSTANTS.CART_REMOVE_ITEM_SUCCESS,\n      payload: id\n    });\n    localStorage.setItem('cartItems', JSON.stringify(getState().cart.data.cartItems));\n  } catch (error) {\n    yield put({\n      type: CONSTANTS.CART_REMOVE_ITEM_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n}\nexport function* fetchProductsListWatcher() {\n  yield takeEvery(CONSTANTS.CART_ADD_ITEM_REQUEST, addToCart);\n}\nexport function* listProductDetailsWatcher() {\n  yield takeEvery(CONSTANTS.CART_REMOVE_ITEM_REQUEST, removeFromCart);\n}\nexport default function* productSaga() {\n  yield all([addToCartWatcher(), removeFromCartWatcher()]);\n}","map":{"version":3,"sources":["C:/Users/uzuma/Desktop/hamdiRH/proshop mern/frontend/src/redux/cart/saga.js"],"names":["takeEvery","put","all","call","api","CONSTANTS","addToCart","id","qty","data","addToCartService","type","CART_ADD_ITEM_SUCCESS","payload","product","_id","name","image","price","countInStock","localStorage","setItem","JSON","stringify","getState","cart","cartItems","error","CART_ADD_ITEM_FAIL","response","message","removeFromCart","fechProductDetail","CART_REMOVE_ITEM_SUCCESS","CART_REMOVE_ITEM_FAIL","fetchProductsListWatcher","CART_ADD_ITEM_REQUEST","listProductDetailsWatcher","CART_REMOVE_ITEM_REQUEST","productSaga","addToCartWatcher","removeFromCartWatcher"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8BC,IAA9B,QAA0C,oBAA1C;AACA,OAAO,KAAKC,GAAZ,MAAqB,YAArB;AACA,OAAO,KAAKC,SAAZ,MAA2B,aAA3B;AAEA,OAAO,UAAUC,SAAV,CAAoB;AAACC,EAAAA,EAAD;AAAKC,EAAAA;AAAL,CAApB,EAA+B;AACpC,MAAI;AACF,UAAMC,IAAI,GAAG,MAAMN,IAAI,CAACC,GAAG,CAACM,gBAAL,EAAsBH,EAAtB,CAAvB;AACA,UAAMN,GAAG,CAAC;AACNU,MAAAA,IAAI,EAAEN,SAAS,CAACO,qBADV;AAENC,MAAAA,OAAO,EAAE;AACPC,QAAAA,OAAO,EAAEL,IAAI,CAACM,GADP;AAEPC,QAAAA,IAAI,EAAEP,IAAI,CAACO,IAFJ;AAGPC,QAAAA,KAAK,EAAER,IAAI,CAACQ,KAHL;AAIPC,QAAAA,KAAK,EAAET,IAAI,CAACS,KAJL;AAKPC,QAAAA,YAAY,EAAEV,IAAI,CAACU,YALZ;AAMPX,QAAAA;AANO;AAFH,KAAD,CAAT;AAWAY,IAAAA,YAAY,CAACC,OAAb,CACI,WADJ,EAEIC,IAAI,CAACC,SAAL,CAAeC,QAAQ,GAAGC,IAAX,CAAgBhB,IAAhB,CAAqBiB,SAApC,CAFJ;AAID,GAjBD,CAiBE,OAAOC,KAAP,EAAc;AACd,UAAM1B,GAAG,CAAC;AACRU,MAAAA,IAAI,EAAEN,SAAS,CAACuB,kBADR;AAERf,MAAAA,OAAO,EACLc,KAAK,CAACE,QAAN,IAAkBF,KAAK,CAACE,QAAN,CAAepB,IAAf,CAAoBqB,OAAtC,GACIH,KAAK,CAACE,QAAN,CAAepB,IAAf,CAAoBqB,OADxB,GAEIH,KAAK,CAACG;AALJ,KAAD,CAAT;AAOD;AACF;AAED,OAAO,UAAUC,cAAV,CAAyB;AAACxB,EAAAA;AAAD,CAAzB,EAA+B;AAClC,MAAI;AACF,UAAME,IAAI,GAAG,MAAMN,IAAI,CAACC,GAAG,CAAC4B,iBAAL,EAAuBzB,EAAvB,CAAvB;AAEA,UAAMN,GAAG,CAAC;AACRU,MAAAA,IAAI,EAAEN,SAAS,CAAC4B,wBADR;AAERpB,MAAAA,OAAO,EAAEN;AAFD,KAAD,CAAT;AAIAa,IAAAA,YAAY,CAACC,OAAb,CACE,WADF,EAEEC,IAAI,CAACC,SAAL,CAAeC,QAAQ,GAAGC,IAAX,CAAgBhB,IAAhB,CAAqBiB,SAApC,CAFF;AAID,GAXD,CAWE,OAAOC,KAAP,EAAc;AACd,UAAM1B,GAAG,CAAC;AACRU,MAAAA,IAAI,EAAEN,SAAS,CAAC6B,qBADR;AAERrB,MAAAA,OAAO,EACLc,KAAK,CAACE,QAAN,IAAkBF,KAAK,CAACE,QAAN,CAAepB,IAAf,CAAoBqB,OAAtC,GACIH,KAAK,CAACE,QAAN,CAAepB,IAAf,CAAoBqB,OADxB,GAEIH,KAAK,CAACG;AALJ,KAAD,CAAT;AAOD;AACF;AAEH,OAAO,UAAUK,wBAAV,GAAqC;AAC1C,QAAMnC,SAAS,CAACK,SAAS,CAAC+B,qBAAX,EAAkC9B,SAAlC,CAAf;AACD;AACD,OAAO,UAAU+B,yBAAV,GAAsC;AACzC,QAAMrC,SAAS,CAACK,SAAS,CAACiC,wBAAX,EAAqCP,cAArC,CAAf;AACD;AACH,eAAe,UAAUQ,WAAV,GAAwB;AACrC,QAAMrC,GAAG,CAAC,CAACsC,gBAAgB,EAAjB,EAAoBC,qBAAqB,EAAzC,CAAD,CAAT;AACD","sourcesContent":["import { takeEvery, put, all, call } from 'redux-saga/effects';\r\nimport * as api from './services';\r\nimport * as CONSTANTS from './constants';\r\n\r\nexport function* addToCart({id, qty}) {\r\n  try {\r\n    const data = yield call(api.addToCartService,id);\r\n    yield put({\r\n        type: CONSTANTS.CART_ADD_ITEM_SUCCESS,\r\n        payload: {\r\n          product: data._id,\r\n          name: data.name,\r\n          image: data.image,\r\n          price: data.price,\r\n          countInStock: data.countInStock,\r\n          qty,\r\n        },\r\n    });\r\n    localStorage.setItem(\r\n        'cartItems',\r\n        JSON.stringify(getState().cart.data.cartItems),\r\n      );\r\n  } catch (error) {\r\n    yield put({\r\n      type: CONSTANTS.CART_ADD_ITEM_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n}\r\n\r\nexport function* removeFromCart({id}) {\r\n    try {\r\n      const data = yield call(api.fechProductDetail,id);\r\n\r\n      yield put({\r\n        type: CONSTANTS.CART_REMOVE_ITEM_SUCCESS,\r\n        payload: id,\r\n      });\r\n      localStorage.setItem(\r\n        'cartItems',\r\n        JSON.stringify(getState().cart.data.cartItems),\r\n      );\r\n    } catch (error) {\r\n      yield put({\r\n        type: CONSTANTS.CART_REMOVE_ITEM_FAIL,\r\n        payload:\r\n          error.response && error.response.data.message\r\n            ? error.response.data.message\r\n            : error.message,\r\n      });\r\n    }\r\n  }\r\n\r\nexport function* fetchProductsListWatcher() {\r\n  yield takeEvery(CONSTANTS.CART_ADD_ITEM_REQUEST, addToCart);\r\n}\r\nexport function* listProductDetailsWatcher() {\r\n    yield takeEvery(CONSTANTS.CART_REMOVE_ITEM_REQUEST, removeFromCart);\r\n  }\r\nexport default function* productSaga() {\r\n  yield all([addToCartWatcher(),removeFromCartWatcher()]);\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}