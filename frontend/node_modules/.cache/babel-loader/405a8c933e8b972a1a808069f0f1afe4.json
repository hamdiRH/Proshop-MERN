{"ast":null,"code":"import * as CONSTANTS from './constants';\nimport produce from 'immer';\nconst initialState = {\n  loading: {\n    cartItems: false\n  },\n  data: {\n    cartItems: []\n  },\n  error: {\n    cartItems: ''\n  }\n};\n\nconst reducer = (state = initialState, {\n  type,\n  payload\n}) => produce(state, x => {\n  console.log(x);\n\n  switch (type) {\n    case CONSTANTS.CART_ADD_ITEM_REQUEST:\n      draft.loading.cartItems = true;\n      break;\n\n    case CONSTANTS.CART_ADD_ITEM_SUCCESS:\n      draft.loading.cartItems = false;\n      draft.dta.cartItems = payload;\n      const existItem = state.cartItems.find(x => x.product === payload.product);\n      existItem ? draft.data.cartItems = state.data.cartItems.map(x => x.product === existItem.product ? payload : x) : draft.data.cartItems = [...state.data.cartItems, payload];\n      break;\n\n    case CONSTANTS.CART_ADD_ITEM_FAIL:\n      draft.loading.cartItems = false;\n      break;\n\n    default:\n      return draft;\n  }\n});\n\nexport default reducer;","map":{"version":3,"sources":["C:/Users/uzuma/Desktop/hamdiRH/proshop mern/frontend/src/redux/cart/reducers.js"],"names":["CONSTANTS","produce","initialState","loading","cartItems","data","error","reducer","state","type","payload","x","console","log","CART_ADD_ITEM_REQUEST","draft","CART_ADD_ITEM_SUCCESS","dta","existItem","find","product","map","CART_ADD_ITEM_FAIL"],"mappings":"AAAA,OAAO,KAAKA,SAAZ,MAA2B,aAA3B;AACA,OAAOC,OAAP,MAAoB,OAApB;AACA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,OAAO,EAAE;AAAEC,IAAAA,SAAS,EAAE;AAAb,GADU;AAEnBC,EAAAA,IAAI,EAAE;AAAED,IAAAA,SAAS,EAAE;AAAb,GAFa;AAGnBE,EAAAA,KAAK,EAAE;AAAEF,IAAAA,SAAS,EAAE;AAAb;AAHY,CAArB;;AAMA,MAAMG,OAAO,GAAG,CAACC,KAAK,GAAGN,YAAT,EAAuB;AAAEO,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAAvB,KACdT,OAAO,CAACO,KAAD,EAASG,CAAD,IAAO;AACpBC,EAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;;AACA,UAAQF,IAAR;AACE,SAAKT,SAAS,CAACc,qBAAf;AACEC,MAAAA,KAAK,CAACZ,OAAN,CAAcC,SAAd,GAA0B,IAA1B;AACA;;AACF,SAAKJ,SAAS,CAACgB,qBAAf;AACED,MAAAA,KAAK,CAACZ,OAAN,CAAcC,SAAd,GAA0B,KAA1B;AACAW,MAAAA,KAAK,CAACE,GAAN,CAAUb,SAAV,GAAsBM,OAAtB;AACA,YAAMQ,SAAS,GAAGV,KAAK,CAACJ,SAAN,CAAgBe,IAAhB,CACfR,CAAD,IAAOA,CAAC,CAACS,OAAF,KAAcV,OAAO,CAACU,OADb,CAAlB;AAGAF,MAAAA,SAAS,GACJH,KAAK,CAACV,IAAN,CAAWD,SAAX,GAAuBI,KAAK,CAACH,IAAN,CAAWD,SAAX,CAAqBiB,GAArB,CAA0BV,CAAD,IAC/CA,CAAC,CAACS,OAAF,KAAcF,SAAS,CAACE,OAAxB,GAAkCV,OAAlC,GAA4CC,CADtB,CADnB,GAIJI,KAAK,CAACV,IAAN,CAAWD,SAAX,GAAuB,CAAC,GAAGI,KAAK,CAACH,IAAN,CAAWD,SAAf,EAA0BM,OAA1B,CAJ5B;AAKA;;AACF,SAAKV,SAAS,CAACsB,kBAAf;AACEP,MAAAA,KAAK,CAACZ,OAAN,CAAcC,SAAd,GAA0B,KAA1B;AACA;;AACF;AACE,aAAOW,KAAP;AApBJ;AAsBD,CAxBM,CADT;;AA2BA,eAAeR,OAAf","sourcesContent":["import * as CONSTANTS from './constants';\r\nimport produce from 'immer';\r\nconst initialState = {\r\n  loading: { cartItems: false },\r\n  data: { cartItems: [] },\r\n  error: { cartItems: '' },\r\n};\r\n\r\nconst reducer = (state = initialState, { type, payload }) =>\r\n  produce(state, (x) => {\r\n    console.log(x)\r\n    switch (type) {\r\n      case CONSTANTS.CART_ADD_ITEM_REQUEST:\r\n        draft.loading.cartItems = true;\r\n        break;\r\n      case CONSTANTS.CART_ADD_ITEM_SUCCESS:\r\n        draft.loading.cartItems = false;\r\n        draft.dta.cartItems = payload;\r\n        const existItem = state.cartItems.find(\r\n          (x) => x.product === payload.product,\r\n        );\r\n        existItem\r\n          ? (draft.data.cartItems = state.data.cartItems.map((x) =>\r\n              x.product === existItem.product ? payload : x,\r\n            ))\r\n          : (draft.data.cartItems = [...state.data.cartItems, payload]);\r\n        break;\r\n      case CONSTANTS.CART_ADD_ITEM_FAIL:\r\n        draft.loading.cartItems = false;\r\n        break;\r\n      default:\r\n        return draft;\r\n    }\r\n  });\r\n\r\nexport default reducer;\r\n"]},"metadata":{},"sourceType":"module"}